<!DOCTYPE html>
<html>
<head>
	<title>pidgin basic</title>
	<style>
	@import '../themes/claro/claro.css';

	body.claro {
		padding: 1em;
	}
	</style>

	<!-- Polyfill for DOM Promises -->
	<script scr="../lib/core/third_party/Promises/polyfill/bin/Promise.min.js"></script>

	<!-- The Polymer Platform -->
	<script src="../lib/platform/platform.js"></script>

	<!-- Using the intern AMD loader for the time being -->
	<script src="../node_modules/intern/node_modules/dojo/dojo.js"></script>
	<script type="text/javascript">
	require({
		baseUrl: '..',
		packages: [{
			name: 'core',
			location: 'lib/core'
		}, {
			name: 'pidgin',
			location: '.'
		}]
	},[
		'pidgin/_Widget', // The "base class" for Pidgin Widgets
		'pidgin/widgets',  // The pidgin widget utility module
		'core/dom',
		'pidgin/tmpl!./examples/resources/ButtonWidget.html',  // An MDV template
		'pidgin/tmpl!./examples/resources/ListWidget.html'  // Another MDV template
	], function (_Widget, widgets, dom, tmplButtonWidget, tmplListWidget) {

		// "Tailoring" a button widget, only bindable value is label
		var ButtonWidget = widgets.register('pd-button-widget', [ HTMLElement, _Widget ], {
			declaredClass: 'pidgin/ButtonWidget',
			template: tmplButtonWidget,
			label: ''
		});

		// "Tailoring" a unordered list widget, template binds and iterates over items.
		var ListWidget = widgets.register('pd-list-widget', [ HTMLElement, _Widget ], {
			declaredClass: 'pidgin/ListWidget',
			customTag: 'pd-list-widget',
			template: tmplListWidget,
			items: []
		});

		// Instantiate the list
		var list1 = new ListWidget();
		list1.id = 'list1';
		list1.items = [{
			label: 'Bill'
		}, {
			label: 'Ben'
		}, {
			label: 'Kris'
		}, {
			label: 'Eugene'
		}];

		document.body.appendChild(list1);

		// Retrieve a reference to the button... The Widget is the Node the Node is the Widget!!!
		var button1 = dom.get('button1');
		button1.label = 'Click Me!';
		button1.on('click', function () {
			// Just reordering things...
			list1.items.push(list1.items.shift());
			Platform.performMicrotaskCheckpoint();
		});

		/* needed for browsers without Object.observe() */
		Platform.performMicrotaskCheckpoint();
	});
	</script>
</head>
<body class="claro">
	<h1>pidgin basic</h1>

	<!-- Look Ma, no dojo/parser -->
	<pd-button-widget id="button1"></pd-button-widget>
</body>
</html>	